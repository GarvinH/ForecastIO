(this["webpackJsonpforecast-io"]=this["webpackJsonpforecast-io"]||[]).push([[0],{25:function(e,t,a){e.exports={arrow:"ArrowButton_arrow__2IULr",button:"ArrowButton_button__2Aay4",up:"ArrowButton_up__3SfcA",down:"ArrowButton_down__1AGpw",hide:"ArrowButton_hide__2TKzv"}},64:function(e,t,a){e.exports=a(95)},69:function(e,t,a){},70:function(e,t,a){},77:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n,r,c,o,s=a(0),i=a.n(s),l=a(24),u=a.n(l),d=(a(69),a(20)),h=a(12),m=a(13),p=a(15),f=a(14),y=a(30),g=a(38),v=a(5);a(70);!function(e){e[e.forecast=0]="forecast",e[e.current=1]="current"}(n||(n={})),function(e){e[e.city=0]="city",e[e.coord=1]="coord"}(r||(r={})),function(e){e[e.changeWeatherMode=0]="changeWeatherMode",e[e.changeSearchMode=1]="changeSearchMode"}(c||(c={})),function(e){e[e.Kelvin=0]="Kelvin",e[e.Metric=1]="Metric",e[e.Imperial=2]="Imperial"}(o||(o={}));var E=i.a.createContext({changeWeatherMode:function(e){},changeSearchMode:function(e){},weatherMode:n.forecast,searchMode:r.city,city:"",coord:["",""],cityChanged:function(e){},coordChanged:function(e){},measureSys:o.Metric,measureSysChanged:function(e){}}),b=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).forecastClicked=function(t){e.context.changeWeatherMode(n.forecast),t.replace("/forecast")},e.currentClicked=function(t){e.context.changeWeatherMode(n.current),t.replace("/current")},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(y.a,{bg:"dark",variant:"dark",expand:"lg"},i.a.createElement(y.a.Brand,null,"Forecast.IO"),i.a.createElement(y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(y.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(g.a,{className:"ml-auto"},i.a.createElement(g.a.Link,{className:"/forecast"===this.props.location.pathname?"active":"",onClick:function(){return e.forecastClicked(e.props.history)}},"5 Days"),i.a.createElement(g.a.Link,{className:"/current"===this.props.location.pathname?"active":"",onClick:function(){return e.currentClicked(e.props.history)}},"Current"))))}}]),a}(i.a.Component);b.contextType=E;var w=Object(v.g)(b),S=(a(77),a(103)),C=a(97),x=a(98),M=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var c=arguments.length,o=new Array(c),s=0;s<c;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={city:"",coord:["",""]},e.titleDecider=function(e){switch(e){case n.forecast:return"5 Day Forecast";case n.current:return"Current"}},e.cityTextChanged=function(t){e.setState({city:t})},e.coordTextChanged=function(t,a){var n=Object(d.a)(e.state.coord);n[t]=a,e.setState({coord:n})},e.formDecider=function(t){switch(t){case r.city:return i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Control,{id:"city",type:"text",placeholder:"City Name","aria-label":"Enter city name",value:e.state.city,onChange:function(t){return e.cityTextChanged(t.target.value)}}));case r.coord:return i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Control,{type:"text",placeholder:"Latitude","aria-label":"Enter latitude",value:e.state.coord[0],onChange:function(t){return e.coordTextChanged(0,t.target.value)}}),i.a.createElement(S.a.Control,{type:"text",placeholder:"Longitude","aria-label":"Enter longitude",value:e.state.coord[1],onChange:function(t){return e.coordTextChanged(1,t.target.value)}}))}},e.searchChanged=function(t){switch(Number(t.target.value)){case r.city:e.context.changeSearchMode(r.city);break;case r.coord:e.context.changeSearchMode(r.coord)}},e.formSubmit=function(t){t.preventDefault(),e.context.cityChanged(e.state.city),e.context.coordChanged(e.state.coord)},e}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.titleDecider(this.context.weatherMode),a=this.formDecider(this.context.searchMode);return i.a.createElement(C.a,null,i.a.createElement("h1",{className:"display-2"},t),i.a.createElement("h1",{className:"display-4 text-muted",style:{textTransform:"capitalize"}},this.context.city),i.a.createElement(S.a,{onSubmit:this.formSubmit},i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Label,{"aria-label":"Select search method"},"Search by:"),i.a.createElement(S.a.Control,{as:"select",value:this.context.searchMode,onChange:function(t){return e.searchChanged(t)}},i.a.createElement("option",{value:r.city,"aria-label":"Search by city"},"City"),i.a.createElement("option",{value:r.coord,"aria-label":"Search by coordinates"},"Coordinates"))),a,i.a.createElement(x.a,{type:"submit",onSubmit:this.formSubmit,className:"mb-4"},"Submit"),i.a.createElement(S.a.Group,{controlId:"formBasicRangeCustom"},i.a.createElement(S.a.Label,null,"Measurement System"),i.a.createElement(S.a.Control,{type:"range",custom:!0,min:"0",value:this.context.measureSys,max:"2",onChange:function(t){return e.context.measureSysChanged(t.target.value)}})),i.a.createElement("h3",null,o[this.context.measureSys])))}}]),a}(i.a.Component);M.contextType=E;var k=M,O=function(e){var t=e.children;return i.a.createElement(i.a.Fragment,null,i.a.createElement(w,null),i.a.createElement(k,null),i.a.createElement("main",null,t))},j=a(44),N=a(63),I=a.n(N).a.create({baseURL:"https://forecast-io-server.herokuapp.com"}),D=a(62),T=a(100),F=a(101),W=a(105),L=function(e,t){return new Date(1e3*e+1e3*t)},A=function(e,t){var a=L(e,t);return function(e,t){var a=t>9?t:"0"+t;return 0===e?"12:"+a+" am":e<12?e+":"+a+" am":12===e?"12:"+a+" pm":e-12+":"+a+" pm"}(a.getUTCHours(),a.getUTCMinutes())},_=function(e){var t=e.dateTimestamp,a=e.weatherInfo,n=e.timezone,r=e.temp,c=e.clicked,o=L(t,n);return i.a.createElement(W.a,{style:{textAlign:"center"}},i.a.createElement("button",{style:{background:"none",border:"none"},onClick:c||void 0},i.a.createElement(W.a.Body,null,i.a.createElement(W.a.Title,null,function(e){switch(e){case 0:return"Sunday";case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return""}}(o.getUTCDay())),i.a.createElement(W.a.Text,null,A(t,n)),i.a.createElement(W.a.Subtitle,{className:"mb-2 text-muted"},function(e){switch(e){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December";default:return""}}(o.getUTCMonth())+" "+o.getUTCDate()),i.a.createElement(W.a.Img,{src:"http://openweathermap.org/img/wn/"+a[0].icon+"@2x.png",alt:a[0].main}),i.a.createElement(W.a.Title,null,r),i.a.createElement(W.a.Text,{style:{textTransform:"capitalize"}},a[0].description))))};function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var B,R=i.a.createElement("path",{d:"M64,0l64,128l-128,0l64,-128Z"}),P=function(e){var t=e.svgRef,a=e.title,n=U(e,["svgRef","title"]);return i.a.createElement("svg",z({width:"100%",height:"100%",viewBox:"0 0 128 128",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},ref:t},n),a?i.a.createElement("title",null,a):null,R)},G=i.a.forwardRef((function(e,t){return i.a.createElement(P,z({svgRef:t},e))})),J=(a.p,a(25)),K=a.n(J);!function(e){e[e.up=0]="up",e[e.down=1]="down"}(B||(B={}));var H=function(e){var t=e.direction,a=e.clicked,n=e.show,r=[K.a.button];return t===B.up?r.push(K.a.up):r.push(K.a.down),n||r.push(K.a.hide),i.a.createElement("button",{className:r.join(" "),onClick:a},i.a.createElement(G,{className:K.a.arrow}))},V=a(99),Z=function(e,t){switch(Number(t)){case o.Kelvin:return e.toFixed(1)+" K";case o.Metric:return(e-273.15).toFixed(1)+" \xb0C";case o.Imperial:return(9*(e-273.15)/5+32).toFixed(1)+" \xb0F"}return"This should not happen"},$=function(e,t){switch(Number(t)){case o.Imperial:return Math.round(e/25.4*100)/100+" in.";default:return e.toFixed(2)+" mm"}},q=function(e){var t,a=e.weather,n=e.timezone,r=e.measureSys,c=void 0!==a.main&&void 0!==a.main.feels_like?i.a.createElement("h4",null,"Feels like: ",i.a.createElement(V.a,{variant:"primary"},Z(a.main.feels_like,r))):null,s=void 0!==a.main&&void 0!==a.main.humidity?i.a.createElement("h4",null,"Humidity: ",i.a.createElement(V.a,{variant:"secondary"},a.main.humidity,"%")):null,l=void 0!==a.clouds&&void 0!==a.clouds.all?i.a.createElement("h4",null,"Cloudiness: ",i.a.createElement(V.a,{variant:"secondary"},a.clouds.all,"%")):null,u=(void 0!==a.wind&&void 0!==a.wind.speed?function(e,t){var a=3600*e/1e3;switch(Number(t)){case o.Imperial:return(a/1.60934).toFixed(1)+" MPH ";default:return a.toFixed(1)+" km/h "}}(a.wind.speed,r):"")+(void 0!==a.wind&&void 0!==a.wind.deg?(t=a.wind.deg,t=Math.round(t/22.5),["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"][t%=16]):""),d=""!==u?i.a.createElement("h4",null,"Wind: ",i.a.createElement(V.a,{variant:"secondary"},u)):null,h=void 0!==a.rain&&void 0!==a.rain["3h"]?i.a.createElement("h4",null,"Rain: ",i.a.createElement(V.a,{variant:"secondary"},$(a.rain["3h"],r))):null,m=void 0!==a.snow&&void 0!==a.snow["3h"]?i.a.createElement("h4",null,"Rain: ",i.a.createElement(V.a,{variant:"secondary"},$(a.snow["3h"],r))):null,p=void 0!==a.visibility?i.a.createElement("h4",null,"Visibility: ",i.a.createElement(V.a,{variant:"secondary"},function(e,t){var a=e/1e3;switch(Number(t)){case o.Imperial:return(a/1.60934).toFixed(1)+" mi. ";default:return a.toFixed(1)+" km "}}(a.visibility,r))):null,f=void 0!==a.sys&&void 0!==a.sys.sunrise?i.a.createElement("h4",null,"Sunrise: ",i.a.createElement(V.a,{variant:"secondary"},A(a.sys.sunrise,n))):null,y=void 0!==a.sys&&void 0!==a.sys.sunset?i.a.createElement("h4",null,"Sunset: ",i.a.createElement(V.a,{variant:"secondary"},A(a.sys.sunset,n))):null;return i.a.createElement(T.a,null,i.a.createElement(C.a,{fluid:!0,className:"col-6 offset-3"},i.a.createElement(F.a,{className:"m-auto justify-content-center"},i.a.createElement(_,{dateTimestamp:a.dt,temp:Z(a.main.temp,r),timezone:n,weatherInfo:a.weather}),i.a.createElement(D.a,{className:"justify-content-center align-self-center col-6"},c,s,l,d,h,m,p,f,y))))},Q=function(e,t,a,n,c){return e!==a&&c===r.city||t!==n&&c===r.coord},X=function(e,t,a){switch(e){case r.city:return"/city?city="+t;case r.coord:return"/coord?lat="+a[0]+"&lon="+a[1]}},Y=a(102),ee=a(104),te=function(e,t,a,n){return t?i.a.createElement(T.a,{className:"text-center"},i.a.createElement(Y.a,{animation:"border",role:"status"},i.a.createElement("span",{className:"sr-only"},"Loading..."))):200!==a&&null!==a?i.a.createElement(T.a,{className:"text-center"},i.a.createElement(ee.a,{variant:"danger",style:{textTransform:"capitalize"}},"Error ",a,". ",n)):e},ae=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={code:null,message:null,forecast:new Array(5),cityInfo:{},forecastIndex:new Array(5),selectedForecast:[0,0]},e.getForecast=function(){e.props.updateLoading(!0);var t="/forecast"+X(e.props.searchMethod,e.props.city,e.props.coord);I.get(t).then((function(t){var a,n=t.data,r=parseInt(n.cod),c=n.city,o=[[],[],[],[],[]],s=-1,i=0,l=Object(j.a)(n.list);try{for(l.s();!(a=l.n()).done;){var u=a.value,d=L(u.dt,c.timezone).getUTCDate();if(i!==d&&(s++,i=d),5===s)break;o[s].push(u)}}catch(m){l.e(m)}finally{l.f()}var h=o.map((function(e,t){if(0===t)return 0;var a,n=0,r=Object(j.a)(e);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(L(o.dt,c.timezone).getUTCHours()>=11)return n;n++}}catch(m){r.e(m)}finally{r.f()}return 0}));e.props.changedCity(n.city.name),e.setState({code:r,forecast:o,cityInfo:c,forecastIndex:h}),e.props.updateLoading(!1)})).catch((function(t){var a=t.response;e.setState({code:a.status,message:a.data.message}),e.props.updateLoading(!1)}))},e.cardCycleUp=function(t){var a=Object(d.a)(e.state.forecastIndex);a[t]=a[t]+1,e.setState({forecastIndex:a})},e.cardCycleDown=function(t){var a=Object(d.a)(e.state.forecastIndex);a[t]=a[t]-1,e.setState({forecastIndex:a})},e.changeSelectedForecast=function(t){e.setState({selectedForecast:[t,e.state.forecastIndex[t]]})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){null!==this.props.oldData&&this.props.oldData.cityInfo.name===this.props.city?(this.setState(this.props.oldData),this.props.changedCity(this.props.oldData.cityInfo.name)):(""!==this.props.city||""!==this.props.coord[0]&&""!==this.props.coord[1])&&this.getForecast()}},{key:"componentDidUpdate",value:function(e){Q(this.props.city,this.props.coord,e.city,e.coord,this.props.searchMethod)&&this.getForecast()}},{key:"componentWillUnmount",value:function(){this.props.saveData(this.state)}},{key:"render",value:function(){var e=this,t=this.state.forecast.map((function(t,a){var n=200===e.state.code?e.state.forecast[a][e.state.forecastIndex[a]]:null,r=200===e.state.code?Z(n.main.temp,e.props.measureSys):"",c=200===e.state.code?i.a.createElement(_,{dateTimestamp:n.dt,weatherInfo:n.weather,timezone:e.state.cityInfo.timezone,temp:r,clicked:function(){return e.changeSelectedForecast(a)}}):null;return i.a.createElement(D.a,{key:a,className:"col-6 col-sm-5 col-md-4 col-lg-3 col-xl-2 text-center"},i.a.createElement(H,{direction:B.up,clicked:function(){return e.cardCycleUp(a)},show:e.state.forecastIndex[a]<e.state.forecast[a].length-1}),c,i.a.createElement(H,{direction:B.down,clicked:function(){return e.cardCycleDown(a)},show:e.state.forecastIndex[a]>0}))})),a=200===this.state.code?this.state.forecast[this.state.selectedForecast[0]][this.state.selectedForecast[1]]:null,n=200===this.state.code?i.a.createElement(q,{weather:a,timezone:this.state.cityInfo.timezone,measureSys:this.props.measureSys}):null,r=i.a.createElement(T.a,null,i.a.createElement(F.a,{className:"justify-content-center"},t,n));return te(r,this.props.loading,this.state.code,this.state.message)}}]),a}(i.a.Component),ne=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={code:null,message:null,weather:{}},e.getCurrent=function(){e.props.updateLoading(!0);var t="/current"+X(e.props.searchMethod,e.props.city,e.props.coord);I.get(t).then((function(t){var a=t.data;if(200!==a.cod)throw t.data;e.props.cityChanged(a.name),e.props.updateLoading(!1),e.setState({weather:a,code:a.cod})})).catch((function(t){var a=t.response;e.setState({code:a.status,message:a.data.message}),e.props.updateLoading(!1)}))},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){(""!==this.props.city||""!==this.props.coord[0]&&""!==this.props.coord[1])&&this.getCurrent()}},{key:"componentDidUpdate",value:function(e){Q(this.props.city,this.props.coord,e.city,e.coord,this.props.searchMethod)&&this.getCurrent()}},{key:"render",value:function(){var e=200===this.state.code?i.a.createElement(q,{weather:this.state.weather,measureSys:this.props.measureSys,timezone:this.state.weather.timezone}):null,t=i.a.createElement(T.a,null,200===this.state.code?i.a.createElement(ee.a,{className:"text-center",variant:"info"},"Time is only as accurate as OpenWeatherMap API provides it. Time will usually be accurate within 10 minutes."):null,e);return te(t,this.props.loading,this.state.code,this.state.message)}}]),a}(i.a.Component),re=function(e){Object(p.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(h.a)(this,a);for(var c=arguments.length,s=new Array(c),i=0;i<c;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={weatherMethod:n.forecast,searchMethod:r.city,city:"",coord:["",""],measureSys:o.Metric,loading:!1,forecastData:null},e.changeWeather=function(t){e.setState({weatherMethod:t})},e.changeSearch=function(t){e.setState({searchMethod:t})},e.changeCity=function(t){e.setState({city:t})},e.changeCoord=function(t){var a=Object(d.a)(t);e.setState({coord:a})},e.measureSysChange=function(t){e.setState({measureSys:t})},e.updateLoading=function(t){e.setState({loading:t})},e.saveForecastData=function(t){e.setState({forecastData:t})},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;switch(this.props.location.pathname){case"/forecast":this.changeWeather(n.forecast);break;case"/current":this.changeWeather(n.current)}navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var a=[];a.push(t.coords.latitude),a.push(t.coords.longitude),e.setState({coord:a,searchMethod:r.coord})}))}},{key:"render",value:function(){var e=this;return i.a.createElement(E.Provider,{value:{changeWeatherMode:this.changeWeather,changeSearchMode:this.changeSearch,weatherMode:this.state.weatherMethod,searchMode:this.state.searchMethod,city:this.state.city,coord:this.state.coord,cityChanged:this.changeCity,coordChanged:this.changeCoord,measureSys:this.state.measureSys,measureSysChanged:this.measureSysChange}},i.a.createElement(O,null,i.a.createElement(v.d,null,i.a.createElement(v.b,{path:"/forecast",render:function(){return i.a.createElement(ae,{city:e.state.city,coord:e.state.coord,searchMethod:e.state.searchMethod,measureSys:e.state.measureSys,changedCity:e.changeCity,loading:e.state.loading,updateLoading:e.updateLoading,oldData:e.state.forecastData,saveData:e.saveForecastData})}}),i.a.createElement(v.b,{path:"/current",render:function(){return i.a.createElement(ne,{city:e.state.city,coord:e.state.coord,searchMethod:e.state.searchMethod,cityChanged:e.changeCity,measureSys:e.state.measureSys,loading:e.state.loading,updateLoading:e.updateLoading})}}),i.a.createElement(v.a,{to:"/forecast"}))))}}]),a}(i.a.Component),ce=Object(v.g)(re);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var oe=a(32);u.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(oe.a,null,i.a.createElement(ce,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.9aeb279b.chunk.js.map